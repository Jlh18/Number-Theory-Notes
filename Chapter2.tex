\chapter{p-adic Fields}
\section{p-adic Integers and Rationals}
\begin{dfn}[Projective system]
    Let $\CC$ be a category.
    A contravariant functor $F : (\N,\le) \to \CC$ 
    is called a projective system.
\end{dfn}

\begin{dfn}[Projective system $A$]
    Define a contravariant functor $A : (\N,\le) \to \RING$ 
    such that for each $n$
    \[A_n := \Z / p^n \Z \quad \text{ and } 
    \quad \pi_n : \Z \to A_n \text{ is the projection}\]
    and for any $n$ such that $1 \le n$, 
    there exists a surjective ring morphism 
    $\phi_n : A_n \to A_{n-1}$ such that
    $\phi_n \circ \pi_n = \pi_{n-1}$ and 
    $\ker(\phi_n) = p^{n-1} A_n$.
\end{dfn}
\begin{ex}
    Check that such a $\phi_n$ exists.
\end{ex}

\begin{dfn}[$p$-adic integers]
    Let 
    \[\Z_p = \{x \in \prod_{n \in \N} A_n \st 
    (\forall n \in \N, x_n \in A_n) \AND
    (\forall n > 0, \phi_n(x_n) = x_{n-1})\}\]
    be the projective limit.
    Define addition and multiplication pointwise. 
    Verify that this $\Z_p$ is a ring with $0 = (0)_{n \in \N}$
    and $1 = (1)_{n \in \N}$.

    For each $n \in \N$ let $\ep_n : \Z_p \to A_n$ be the 
    ring morphisms mapping $x \mapsto x_n$.
    Note that by definition $\phi_n \circ \ep_n = \ep_{n-1}$.

    In addition,
    provide each $A_n$  with the discrete toplogy,
    giving $\prod_{n \in \N} A_n$ the product topology
    and $\Z_n$ the subset topology.
\end{dfn}

\begin{prop}[$\Z_p$ is compact]
    \link{Z_p_compact}
    Since each $A_n$ is finite, 
    each $A_n$ is compact.
    Hence by Tychonoff's theorem
    the product is compact.
    Since closed in compact is compact
    we just need to show that $\Z_p$ is closed.

    We want to write $\Z_p$ as the intersection of 
    closed sets 
    \[D_k:= \set{x \in \prod_{n\in\N} A_n \st \phi_k (x_k) = x_{k-1}}\]
    for $k \in \N$.
    Clearly 
    \[\bigcap_{k\in\N} D_k = \Z_p\]
    and 
    \[D_k = \bigcup_{x_{k-1} \in A_{k-1}} \brkt{\ep_{k-1}^{-1}(x_{k-1}) 
    \cap \bigcup 
    \set{\ep_k^{-1}(x_k) \st x_k \in A_k \AND \phi_k(x_k) = x_{k-1}}}\]
    Since each $\set{x_k}$ is closed in $A_k$, 
    each preimage $\ep_k^{-1}(x_k)$ is closed.
    Thus the finite union of the preimages
    \[\bigcup 
    \set{\ep_k^{-1}(x_k) \st x_k \in A_k \AND \phi_k(x_k) = x_{k-1}}\]
    is closed.
    Since each $\set{x_{k-1}}$ is closed in $A_{k-1}$, 
    each preimage $\ep_{k-1}^{-1}(x_{k-1})$ is closed.
    Thus intersection 
    \[\brkt{\ep_{k-1}^{-1}(x_{k-1}) 
    \cap \bigcup 
    \set{\ep_k^{-1}(x_k) \st x_k \in A_k \AND \phi_k(x_k) = x_{k-1}}}\]
    is closed.
    Hence the finite union is closed and $D_k$ is closed.
    Arbitrary intersection of closed is closed so $\Z_p$ 
    is closed and thus compact.
\end{prop}

\begin{prop}[Universal property of $\Z_p$]
    Suppose $R$ is a ring with ring morphisms 
    $\rho_n : R \to A_n$ for each $n \in \N$
    such that for each $n > 0$, 
    $\phi_n \circ \rho_n = \rho_{n-1}$.
    Then there exists a unique ring morphism $f : R \to \Z_p$
    such that for each $n$, 
    $\ep_n \circ f = \rho_n$.
\end{prop}
\begin{proof}
    If there exists such a map then it is unique:
    suppose $f,g$ both satisfy the given properties.
    Then for any $n$ and any $a \in R$
    $\ep_n \circ f (a)= \rho_n (a) = \ep_n \circ g (a)$.
    Thus $f(a) = g(a)$, by the property of products
    (if they agree on all the projections they are equal).

    For existance we let $a \in R$ and consider the set
    \[\bigcap_{n \in \N} {\ep_n^{-1} \circ \rho_n (a)}\]
    show that it has cardinality $1$,
    and let $f$ map $a$ to this unique element.
    If $x,y \in \bigcap_{n \in \N} {\ep_n^{-1} \circ \rho_n (a)}$
    then for any $n \in \N$, 
    $\ep_n (x) = \rho_n (a) = \ep_n (y)$.
    Thus $a = b$ by the property of products.
    Hence the cardinality is $\le 1$.

    To show that the set is non-empty,
    take $x = (\rho_n (a))_{n \in \N}$.
    This is in $\Z_p$ since for each $n>0$,
    $\phi_n \circ \rho_n(a) = \rho_{n - 1}(a)$.
    Also it is in the intersection since for each $n$,
    $\ep_n(x) = \rho_n(a)$. 
    Hence the cardinality is $1$.
    Hence $f$ is well-defined and for all $n \in \N$, 
    $\ep_n \circ f = \rho_n$.

    For any $n$, 
    \[\ep_n \circ f (a + b) = \rho_n (a + b) = \rho_n (a) + \rho_n (b)
    = \ep_n \circ f(a) + \ep_n \circ f(b) = \ep_n (f(a) + f(b))\]
    Hence by property of products $f(a + b) = f(a) + f(b)$
    and similarly for multiplication.
    Note that for any $n$, 
    $\ep_n \circ f(1) = \rho_n (1) = 1$.
    Hence $f(1) = 1$.
    Thus $f$ is a ring morphism.
\end{proof}

\begin{cor}[$\Z$ injects into $\Z_p$]
    Then there exists a unique injective ring morphism 
    $\io : \Z \to \Z_p$
    such that for each $n$, 
    $\ep_n \circ \io = \pi_n$.
\end{cor}
\begin{proof}
    By the previous theorem the morphism exists and is unique.
    It must send $1 \mapsto 1$ hence $\io(x) = 0$ would imply
    $\pi_n (x) = \ep_n \circ \io(x) = 0$ for all $n \in \N$.
    Hence for any $n \in \N$, 
    $p^n \mid x$.
    Thus $x = 0$.
\end{proof}

\begin{prop}[Multiplying by $p^n$ is injective 
    and $x_n = 0$ implies $x \in p^n \Z_p$]
    \link{multiplying_p_n_injective}
    \begin{center}\begin{tikzcd}
        0 \ar[r] &\Z_p \ar[r, "p^n \cdot"] & 
        \Z_p \ar[r, "\ep_n"] & A_n \ar[r] & 0
    \end{tikzcd}\end{center}
    is a short exact sequence of abelian groups.
\end{prop}
\begin{proof}
    To check that the morphism $\Z_p \to \Z_p$ 
    multiplying by $p^n$ is injective
    it suffices to show that multiplying by $p$ is 
    injective.
    Suppose $x$ is in the kernel of this map, 
    then $px = 0$ thus for any $n$, 
    $p x_{n+1} = \ep_{n+1}(px) = 0$.
    We show that for any $n$, $x_n = 0$.
    There exists $a \in \Z$ such that
    $\pi_{n+1} (a)= x_{n+1}$.
    Since $\pi_{n+1}(pa) = p x_{n+1} = 0$,
    $pa = p^{n+1} b$ for some $b \in \Z$.
    Hence $a = p^n b$ since $\Z$ is an integral domain.
    Thus $\pi_n (a) = x_n = 0$.
    Thus $x = 0$.

    To check that the $p^n \Z_p = \ker(\ep_n)$
    we note that for any $x \in \Z_p$, 
    $\ep_n (p^n x) = p^n x_n = 0 \in A_n$.
    Hence $p^n \Z_p \subs \ker(\ep_n)$.
    For the other direction suppose $\ep_n(x)= 0$.
    Suppose $n \le m \in \Z$.
    Then there exists a unique $a_m \in \Z$ such that $0 \le a < p^m$
    and $\pi_m (a_m) = \ep_m(x)$.
    Then 
    \[\pi_n (a_m) = \phi_m \circ \cdots \circ \phi_{n+1} \pi_m (a_m) = 
    \phi_m \circ \cdots \circ \phi_{n+1} \ep_m (x) = \ep_n (x) = 0\]
    Thus there exists a unique $b_m \in \Z$ such that $a_m = p^n b_m$.
    
    Let $b = (\pi_m(b_m))_{m \in \N} \in \Z_p$.
    Note that multiplying by $p^n$ commutes with all the map
    as they are ring homomorphisms.
    Then for any $m \in \N$,
    \begin{align*}
        \phi_{m+1} \ep_{m+1}(b) &= \phi{m+1} \circ \pi_{m+1} (b_{m+1})
        &= \phi{m+1} \circ \pi_{m+1} (p^n a_{m+1})\\
        &= p^n \phi_{m+1} \circ \pi_{m+1} (p^n a_{m+1})
        &= p^n \pi_m (a_m) \\
        &= \pi_m(b_m) &= \ep_m(b)
    \end{align*}
    Hence $b \in \Z_p$.
    Furthermore, 
    let $m \in \N$ then
    \[ \ep_m(p^n b) = p^n \pi_m (b_m) = \pi_m (p^n b_m) = 
    \pi_m (a_m) = \ep_m(x)\]
    Hence $p^n b = x$.
    Thus $x \in p^n \Z_p$.
\end{proof}

\begin{prop}[$\Z_p$ is a local ring, decomposition of non-zero elements]
    \link{Z_p_non_zero_decomp}
    If $x \in \Z_p$ then
    \begin{enumerate}
        \item $x_n \in A_n$ is a unit if and only if $x_n \notin p A_n$.
        \item $x \in \Z_p$ is a unit if and only if $x \notin p \Z_n$.
        \item For any $ x \in \Z_p \setminus \set{0}$ there exist 
            unique $n \in \N$ and $u \in \Z_p$ such that
            $u$ is a unit and $p^n u = x$.
    \end{enumerate}
\end{prop}
\begin{proof}~
    \begin{enumerate}
        \item If $x_n$ is a unit and $x_n \in p A_n$ then
            write $x_n = p y_n $ for $y_n \in A_n$.
            We see that $p$ is a unit since $x_n ^{-1} p y_n = 1$.
            However $p$ is nilpotent since $p^n = 0$ a contradiction.
            Hence $x_n \notin p A_n$.
            Conversely if $x_n \notin p A_n$ then
            supposing $x_1 = 0$ deduces $x \in p \Z_p$ by 
            the \linkto{multiplying_p_n_injective}{
                previous proposition}.
            Hence $x_n \in p A$ a contradiction.
            Thus $x_1 \ne 0 \in A_1$, a field,
            so $x_1$ is a unit in $A_1$.
            Hence there exist $x_\Z,y_\Z,z_\Z \in \Z$
            such that $\io(x_\Z) = x$ and 
            \begin{align*}
                x_\Z y_\Z + p z_\Z =& 1 \\
                \implies \pi_n(x_\Z y_\Z + p z_\Z) =& 1\\
                \implies x_n y_n + p z_n =& 1\\
                \implies x_n y_n (1 + \dots + (p z_n)^{n-1}) &= 
                1 - (pn)^z = 1 \in A_n\\
                \implies x_n \text{ is a unit}
            \end{align*}
            Hence $x_n$ is a unit if and only if $x_n \notin p A_n$.
        \item If $x$ is a unit of $\Z_p$
            then in particular $x_1$ is a unit.
            Suppose $x \in p \Z_p$ then $x_1 = 0$ by the 
            \linkto{multiplying_p_n_injective}{previous proposition}.
            Hence $x_1$ is not a unit, a contradiction.
            Thus $x \notin p \Z_p$.
            
            For the converse suppose $x \notin p \Z_p$
            then by the
            \linkto{multiplying_p_n_injective}{previous proposition}
            $x_1 \ne 0$.
            For any $n \in \N$, 
            if $x_n \in A_n$ then 
            $x_1 = \phi_n \circ \cdots \phi_2 x_n = 0$
            which is false.
            Hence for any $n \in \N$, $x_n \notin p A_n$
            which by the first part implies there exists
            a unique $y_n \in A_n$, $x_n y_n = 1$.
            We show that $y := (y_n)_{n \in \N}$ is the inverse of $x$
            in $\Z_p$.
            To show that $y \in \Z_p$ let $n \in \N$.
            \[x_n \phi_{n+1} (y_{n+1}) = 
            \phi_{n+1}(x_{n+1})\phi_{n+1}(y_{n+1})
            \phi_{n+1}(x_{n+1} y_{n+1}) = \phi(1) = 1\]
            Hence $\phi_{n+1} (y_{n+1}) = y_n$ 
            by uniqueness of inverses in $A_n$.
            To show that $x y = 1$ note that
            for any $n \in \N$, 
            $\ep_n(xy) = x_n x_y = 1$.
            Hence $xy = 1$.
        \item Let $x \in \Z_p$ be non-zero and consider
            the set \[\set{n \in \N \st \ep_n (x) = 0}\]
            This is non-empty since $\ep_0 (x) = 0$.
            By induction there exists a maximum of this set,
            call this $n$.
            Since $\ep_n(x) = 0$ by the 
            \linkto{multiplying_p_n_injective}{previous proposition}
            $x = p^n y$ for some $y \in \Z_p$.
            Suppose $y \in p \Z_p$ then $\ep_{n + 1} (x) = 0$
            which is a contradiction with maximality.
            Hence by the previous part of this proposition
            $y$ is a unit.
            
            Suppose we have another decomposition 
            $x = p^m z$ with $z$ a unit.
            Then by maximality of $n$, $m \le n$.
            By the 
            \linkto{multiplying_p_n_injective}{previous proposition}
            we have that multiplication by $p^m$ is injective.
            Hence $p^n y = p^m z$ implies $p^{n-m} y = z$.
            Since $z$ is a unit, $n - m = 0$.
            Hence $n = m$ and $y = p^{n-m} y = z$.
    \end{enumerate}
\end{proof}

\begin{dfn}[$\N_\infty$]
    On the set $\N_{\infty} := \N \cup \set{\infty}$ 
    define commutative addition such that
    if $n,m \in \N$ then it is the usual addition and
    for any $x \in \N_\infty$, $x + \infty = \infty$.
    We order the set using $\le$, 
    where it is the usual $m\le n$ for $m,n \in \N$
    and for any $x \in \N_\infty$, $x \le \infty$ and 
    if $\infty \le x$ then $x = \infty$.
    This is a total order hence we have a well defined
    infimum for any non-empty set.
\end{dfn}

\begin{dfn}[$p$-adic valuation]
    Given $p$ a prime, define $v_p : \Z_p \to \N_\infty$
    sending any non-zero $x$ to $n$,
    where $n \in \N$
    and $u \in \Z_p$ is a unit such that $x = p^n u$.
    In the other case we define $v_p(0):=\infty$.
\end{dfn}

\begin{prop}
    For any $p$ prime and $x,y \in \Z_p$
    \[v_p(x y) = v_p(x) + v_p(y), \quad 
    \inf \set{v_p(x), v_p(y)} \le v_p(x + y)\]
\end{prop}
\begin{proof}
    Case on what $x,y$ are.
\end{proof}

\begin{cor}
    \link{Z_p_int_dom}
    $\Z_p$ is an integral domain.
\end{cor}
\begin{proof}
    Let $x, y \in \Z_p$ be such that $xy = 0$.
    Suppose for a contradiction both $x, y$ are non-zero.
    Then $v_p(x), v_p(y) \in \N$ hence
    $\infty = v_p(x y) = v_p(x) + v_p(y) \in \N$, 
    a contradiction.
\end{proof}

\begin{dfn}[Metric on $\Z_p$]
    Define a norm on $\Z_p$ by 
    \[\abs{\star} : \Z_p \to \R_{\ge 0} := x \mapsto 
    \begin{cases}
        0 &, x = 0\\
        p^{-v_p(x)} &, x \ne 0
    \end{cases}\]
    This satisfies 
    \begin{enumerate}
        \item $\abs{x} = 0 \iff x = 0$
        \item $\abs{x + y} \le \max(\abs{x},\abs{y}) \le \abs{x} + \abs{y}$
        \item $\abs{xy} \le \abs{x} \abs{y}$
        \item $\abs{1} = 1$
    \end{enumerate}
    This induces a metric on $\Z_p$.
\end{dfn}
\begin{proof}
    Straight forward.
\end{proof}

\begin{prop}[Cosets are clopen balls]
    \link{cosets_are_clopen}
    For any $n$ and $a \in \Z$
    the coset $a + p^n \Z_p$ is a clopen ball
    $B_{\de} (a)$ for some $\de \in \R-{>0}$.
\end{prop}
\begin{proof}
    $b \in a + p^n \Z_p$ if and only if 
    $n \le v_p(b - a)$ if and only if 
    $\abs{b - a} \le p^{-n}$
    if and only if 
    $\abs{b - a} < \frac{p^{-n}+p^{1-n}}{2} =: \de$,
    as the image of the norm is discrete.
    Hence $a + p^n \Z_p = \bar{B_{p^{-n}(a)}} = B_\de(a)$ and is clopen.
\end{proof}

\begin{prop}[Induced topologies are equivalent]
    The metric topology $\TT_0$ is the same as the
    subspace topology $\TT_1$ from $\prod_{n \in \N} A_n$.
\end{prop}
\begin{proof}
    We first show that the neighbourhoods of points are the same.
    Call the neighbourhood filter for a point $a$ 
    in the metric tolopogy $N_0(a)$
    and the other $N_1(a)$.
    We use $\<\star \st \dots\>$ to mean the neighbourhood filter generated
    by $\{\star \st \dots\}$.
    \begin{align*}
        N_1(a) 
        &= \< U \cap \Z_p \st a \in U \in 
        \text{ product topology on $\prod A_n$}\>\\
        &=\< \ep_n^{-1} (U) \cap \Z_p \st \exists n \in \N, 
        a_n \in U \subs A_n\>\\
        &= \< U \subs \Z_p \st \exists n \in \N,
        a + \ker(\ep_n) \subs U\>\\
        &= \< U \subs \Z_p \st \exists n \in \N,
        a + p^n \Z_p \subs U\>\\
        &= \< U \subs \Z_p \st \exists \de > 0, B_\de(a) \subs U\>\\
        &= N_0(a)
    \end{align*}

    The penultimate equality is due to 
    \linkto{cosets_are_clopen}{cosets being clopen balls} for one 
    inclusion and
    the other inclusion follows from finding $n \in \N$
    such that $p^{-(n+1)} < \de < p^{-n}$.
    
    Since a subset $U$ is open in a topology
    if and only if for all points $a \in U, U \in N(p)$
    we see that $U \in \TT_0$ if and only if 
    $\forall p \in U, U \in N_0(p)$ if and only if
    $\forall p \in U, U \in N_1(p)$ if and only if
    $U \in \TT_1$.
\end{proof}

\begin{prop}[Topological properties of $\Z_p$]
    \link{Z_dense_in_Z_p}
    $\Z_p$ is complete in the topological sense
    and the image of $\Z$ is dense in $\Z_p$.
\end{prop}
\begin{proof}
    Any Cauchy sequence in $\Z_p$ has a
    subsequence converging to $x \in \Z_p$
    as $\Z_p$ is a \linkto{Z_p_compact}{compact} metric space.
    This is also the unique limit of the original sequence 
    as it is Cauchy.
    Hence $\Z_p$ is complete.

    Clearly $\bar{\io(\Z)} \subs \Z_p$.
    Let $x \in \Z_p$. 
    We want to show that there exists a sequence
    in $\io(\Z)$ converging to $x$, 
    hence showing that $x \in \bar{\io(\Z)}$.
    For any $n \in \N$ there exists an element 
    $b \in \Z$ such that $\pi_n(b) = \ep_n(x)$.
    Define the sequence $y: \N \to \Z_p := n \to \io(b)$.
    Then we claim that $\lim_{n \in \N} y(n) = x$
    Let $\de \in \R_{>0}$. 
    There exists $N \in \N$ such that $p^{-N}<\de$.
    Let $n \in \N$ be such that $N \le n$.
    Then $\ep_n(x - y(n)) = 0$ 
    \linkto{multiplying_p_n_injective}{implies}
    $x - y(n) \in p^n A_n$  
    and so 
    \[\abs{x - y(n)} = p^{-v_p(x - y(n))} \le p^{-n}
    \le p^{-N} < \de\]
    Thus the limit exists and is $x$.
    Hence $\bar{\io(\Z)} = \Z_p$.
\end{proof}

\begin{dfn}[$\Q_p$]
    Since $\Z_p$ is an 
    \linkto{Z_p_int_dom}{integral domain},
    we can construct its field of fractions.
    We call this $\Q_p$.
\end{dfn}

\begin{prop}[Inclusions into $\Q_p$]
    There is a unique injective ring morphism $\Z_p \to \Q_p$
    which (without confusion) we treat as $\subs$
    and there is a unique injective extension of the ring morphism 
    $\io : \Z \to \Z_p$ to $\Q \to \Q_p$.
    \begin{center}
    \begin{tikzcd}
        \Z \ar[r, "\subs"] \ar[d, "\io", swap]
        &\Q \ar[d, dashed]\\
        \Z_p \ar[r, "\subs", swap]&\Q_p
    \end{tikzcd}
    \end{center}
\end{prop}
\begin{proof}
    The inclusion $\Z_p \to \Q_p$ is a result
    of the construction of the field of fractions.
    We extend $\io$ by mapping $\frac{a}{b} \in \Q$ to
    $\frac{\io(a)}{\io(b)} \in \Q_p$.
    Check that it is well-defined and injective,
    a ring morphism and that the diagram above commutes.
\end{proof}

\begin{prop}
    $\Q_p \iso \Z_p[\frac{1}{p}]$ canonically and any unit of $\Q_p$
    can be uniquely written in the form $p^n u$ for $n \in \Z$
    and $u$ a unit in the image of $\Z_p$ under the isomorphism. 
\end{prop}
\begin{proof}
    Let $f : \Z_p [\frac{1}{p}] \to \Q_p$ such that 
    $\sum_{i = 0}^{n} x_i (\frac{1}{p})^i
    \mapsto \sum_{i = 0}^{n} \frac{x_i}{p^i}$.
    Clearly $f$ is well defined and injective.
    To show that it is surjective note that for any element
    $\frac{a}{b} \in \Q_p$ with $a, b \in \Z_p, b \ne 0$
    we can write \linkto{Z_p_non_zero_decomp}{$b = p^n u$} 
    for unique $n \in \N$ and $u$ a unit.
    Hence 
    $\frac{a}{b} = \frac{a}{p^n u} = \frac{a u^{-1}}{p^n}$
    which is due to an element of $\Z_p[\frac{1}{p}]$ via $f$.

    The same trick gives us the decomposition of units in $\Q_p$.
\end{proof}

\begin{dfn}[$p$-adic valuation for $\Q_p$]
    Extend the definition of $v_p$ to $\Q_p$
    by taking $x \ne 0$ to $n$ such that $p^n u = x$.

    Note that $0 \le v_p(x)$ if an only if 
    $x$ is a $p$-adic integer.
\end{dfn}

\begin{dfn}[Addition is a homeomorphism on $\Q_p$]
    Let $a \in \Q_p$.
    Then the map $\Q_p \to \Q_p$ sending 
    $b \mapsto a + b$ is a homeomorphism.
\end{dfn}
\begin{proof}
    Let $b \in \Q_b$ and let $\de \in \R_{>0}$.
    It suffices that $a + B_\de (b) \subs B_\de (a + b)$.
    Indeed if $c \in B_\de (b)$ then
    $\abs{a + c - (a + b)} = \abs{c - b} < \de$.

    This map has inverse $-a$ which is continuous for the 
    same reasons. 
    Hence $a+\star$ is a homeomorphism.
\end{proof}

\begin{prop}[Topological properties of $\Q_p$]
    Useful properties:
    \begin{enumerate}
        \item For any $n \in \N$, 
        $p^n \Z_p$ is clopen in $\Q_p$,
        in particular $\Z_p$ is open in $\Q_p$.
        \item $\Q_p$ is locally compact
        and $\io(\Q)$ is dense in $\Q_p$.
        \item $\Q_p$ is complete.
    \end{enumerate}
\end{prop}
\begin{proof}
    Since $\Z_p$ and $\Q_p$ share the same metric 
    Each 
    \linkto{cosets_are_clopen}{$p^n \Z_p$ is clopen in $\Q_p$}.
    We first note that $\Q_p$ is locally compact at $0$
    since $\Z_p$ is an open compact neighbourhood of $0$.
    Furthermore, for any $a \in \Q_p$, 
    $a + \star$ is a homeomorphism so
    the coset $a + \Z_p$ 
    is the image of an open compact set which is open and compact.
    Clearly $a \in a + \Z_p$. 
    Hence $\Q_p$ is locally compact.

    Clearly $\bar{\io(\Q)} \subs \Q_p$
    Let $x \in \Q_p$,
    then $x = p^n u$ for $n \in \N $ and $u \in \Z_p$ a unit.
    Then 
    $\linkto{Z_dense_in_Z_p}{u \in \bar{\io(\Z)}} \subs \bar{\io(\Q)}$
    and so $x \in p^n \bar{\io(\Q)} \subs \bar{\io(\Q)}$.
    Thus $\Q$ is dense in $\Q_p$.

    $\Q_p$ is complete: take a Cauchy sequence in $\Q_p$.
    Let $\de = 1$, 
    then there exists $N \in \N$ such that for any $n, m \in \N$,
    if $N \le n \le m$ then $\abs{x_m - x_n} \le 1$.
    Hence the sequence $(x_m)_{N \le m} \subs x_N + \Z_p$ 
    which is compact as it is an image of the homeomorphism 
    $x_m + \star$.
    Hence there is a subsequence converging to a limit in 
    $x_m + \Z_p$, 
    and applying Cauchy we conclude this is the limit of the 
    original sequence.
\end{proof}

\begin{prop}[Series converge iff terms converge]
    Let $x : \N \to \Q_p$ be a sequence.
    Then $x$ converges if and only if 
    $\lim_{n \in \N}(x(n+1) - x(n)) = 0$.
\end{prop}
\begin{proof}
    Since $\Q_p$ is complete
    it suffices to show that $x$ is Cauchy if and only if 
    $\lim_{n \in \N}(x(n+1) - x(n)) = 0$.
    The forward implication is straightforward.
    For the other direction take $\de \in \R_{>0}$.
    By assumption 
    \[\exists N \in \N, \forall n \in \N_{>N}, 
    \abs{x(n+1) - x(n)} < \frac{\de}{2}\]
    Let $n, m \in \N$ be such that $N \le n \le m$.
    By induction we can show that 
    $\abs{x(m) - x(n)} \le \frac{\de}{2} < \de$,
    using $\abs{x + y} \le \max(\abs{x},\abs{y})$ 
    for the induction.
\end{proof}

\section{p-adic Equations}

\begin{prop}[Non-empty projective limits]
    \link{non_empty_projective_limits}
    Suppose $F : (\N,\le) \to \CC$ is a projective system.
    Denote $\fall{m}{n}$ as the image map in $\CC$ 
    from $F(n) \to F(m)$.
    Suppose that for every $n \in \N$ the object
    $F(n)$ in $\CC$ is finite and non-empty.
    Then the projective limit 
    \[\varprojlim F := \set{
        x \in \prod_{n\in \N} F(n) \st \forall n \in \N, 
        \fall{n+1}{n}x_{n+1} = x_n}\]
    is non-empty.
    Conversely if the projective limit is non-empty
    then each $F(n)$ is non-empty.
\end{prop}
\begin{proof}
    The trick is to construct a surjective projective system where
    the image objects are subsets of each $F(n)$.
    Let $n \in \N$.
    Suppose for a contradiction that 
    \[\forall k \in \N, \exists l \in \N_{\ge k}, 
    \fall{n}{n+l} D_{n+l} \ne \fall{n}{n+k} D_{n+k}\]
    Then by induction we can show that 
    \[\forall k \in \N, \exists l \in \N_{\ge k}, 
    \fall{n}{n+l} D_{n+l} \subset \fall{n}{n+k} D_{n+k}\]
    Since $D_n$ is finite and each 
    $\fall{n}{n+k} D_{n+k} \subs D_n$,
    we can conclude by induction that there exists 
    $k \in \N$ such that 
    $\fall{n}{n+k} D_{n+k} = \nothing$,
    which implies that $D_{n+k}$ is empty,
    a contradiction.
    Hence 
    \[\exists k \in \N, \forall l \in \N_{\ge k}, 
    \fall{n}{n+l} D_{n+l} = \fall{n}{n+k} D_{n+k}\]
    The sets `become constant'.
    We define a functor $G : (\N,\le) \to \CC$
    sending $n \mapsto \fall{n}{n+k} D_{n+k}$ and
    with the same image maps as $F$.
    This functor is well-defined and surjective because
    for any $n\in \N$, 
    using the `becomes constant' property of $G(n + 1)$
    we can show that $\fall{n}{n+1} G(n+1) = G(n)$.
    
    Let $x_0 \in G(0)$, 
    which is non-empty as it is the 
    image of a non-empty set $g(k)$ for some
    $k \in \N$.
    By induction we can find $x_n \in G(n)$ 
    for each $n \in \N$ such that 
    $\fall{n}{n + 1} x_{n+1} = x_n$.
    Hence $(x_n)_{n \in \N} \in \varprojlim G$.
    Since each $x_n \in F(n)$, 
    $(x_n)_{n \in \N} \in \varprojlim F$.

    The converse is immediate from the previous proposition.
\end{proof}

\begin{nttn}
    For $\phi: A \to B$ a ring morphism,
    $S$ a finite subset of $A[x_1, \dots, x_m]$,
    and
    \[f = \sum_{\la \in S} \la 
    \prod_{i = 1}^m (x_i)^{r_{i,\la}} 
    \quad \in A [x_1, \dots, x_m]\]
    we write $\phi (f)$ to mean 
    \[\sum_{\la \in S} \phi(\la) 
    \prod_{i = 1}^m (x_i)^{r_{i,\la}} 
    \quad \in B [x_1, \dots, x_m]\]
\end{nttn}

\begin{prop}[Vanishing commutes with limit]
    \link{vanishing_commutes_with_limit}
    Let $I \subs \Z_p [x_1, \dots, x_m]$.
    Then \[\V(I,\Z_p) \iso \varprojlim_{n \in \N} \V(\ep_n(I),A_n)\]
    via $(a_1,\dots, a_m) \in \V(I)$
    being sent to
    $(\ep_n(a_1),\dots, \ep_n(a_m))_{n\in\N} \in \varprojlim \V(\ep_n(I),A_n)$.

    In particular $\V(I)$ is non-empty
    if and only if for all $n \in \N$, 
    $V_n := \V (\ep_n(I))$ is non-empty,
    where $\ep_n(I)$ denotes $\set{\ep_n(f) \st f \in I}$.
\end{prop}
\begin{proof}
    Note that $(a_1, \dots, a_m) \in (\Z_p)^m$, 
    if and only if for all $i \in \set{1, \dots, m}$,
    $a_i \in \varprojlim A_n$
    if and only if 
    for all $i \in \set{1, \dots, m}, n \in \N$,
    $\ep_n(a_i) \in A_n$ and $\fall{n}{n+1}\ep_{n+1}(a_i) = \ep_n(a_i)$.
    This is if and only if for all $n \in \N$,
    \[(\ep_n(a_1), \dots, \ep_n(a_m)) \in A_n^m
    \text{and} \fall{n}{n+1}(\ep_{n+1}(a_1), 
    \dots, \ep_{n+1}(a_m)) = \ep_n(a_i)\]
    which is if and only if 
    $(\ep_n(a_1), \dots, \ep_n(a_m))_{n \in \N} \in \varprojlim (A_n^m)$.
    Hence we have an isomorphism of rings 
    \[(\Z_p)^m = (\varprojlim{A_n})^m \iso \varprojlim (A_n^m)\]

    We first show that the functor $V$ mapping $n \mapsto V_n$ 
    and $n \le m$ to $\fall{n}{m} : V_m \to V_n$
    is a projective system.
    We just need to show that 
    \[\forall n \in \N, \forall a \in V_{n+1}, 
    \fall{n}{n+1} a \in V_n\]
    Indeed if $a \in V_{n+1}$ then \footnote{
        For $\phi: A \to B we $ and $a \in A^m$ we write 
        $\phi(a) = \phi(a_1, \dots, a_m) = (\phi(a_1), \dots, \phi(a_m))$.
        In our projective system we use this notation for $\fall{n}{n+1}$.
    }
    \begin{align*}
        \ep_n (f) \circ \fall{n}{n+1}(a) 
        & = \fall{n}{n+1} \circ \ep_{n+1} 
        (f) (\fall{n}{n+1}(a))
        & \\
        &= \fall{n}{n+1} \brkt{\ep_{n+1} (f) (a)}
        & \text{ verify this}\\
        &= \fall{n}{n+1} (0) = 0 
        & \text{ since } a \in V_{n+1}
    \end{align*}
    Hence this forms a projective system with each $V_n$ 
    finite (since they are respectively subsets of $A_n$).
    
    Claim: $\varprojlim V$ is isomorphic to $\V(I)$
    via the isomorphism 
    \[(\Z_p)^m \iso \varprojlim (A_n^m)\]

    \begin{align*}
        (a_1, \dots, a_m) \in \V(I) \subs (\Z_p)^m 
        &\iff \forall f \in I, f(a_1, \dots, a_m) = 0 \in \Z_p\\
        &\iff \forall n \in \N, \forall f \in I,  
        \ep_n(f(a_1, \dots, a_m)) = 0 \in A_n\\
        &\iff \forall n \in \N, \forall f \in I, 
        \ep_n(f)(\ep_n(a_1), \dots, \ep_n(a_m)) = 0 \in A_n\\
        &\iff (\ep_n(a_1), \dots, \ep_n(a_m))_{n \in \N} \in  
        \varprojlim V
    \end{align*}
\end{proof}

\begin{dfn}
    For $R$ a ring $(a_1, \dots, a_m) \in R^m$ is primitive if
    there exists $i \in \set{1,\dots,m}$ such that $a_i$ is a unit.
    For the cases $R = A_n$ or $R = \Z_p$, 
    elements are non-primative if and only if for all 
    $i \in \set{1,\dots,m}$, $a_i \in p R^m$.
\end{dfn}

\begin{prop}
    Let $I \subs \Z_p[x_1,\dots, x_m]$ be such that 
    $\forall f \in I, f$ is homogeneous.
    Then the following are equivalent:
    \begin{enumerate}
        \item There exists a non-zero $a \in \V(I,\Q_p)$.
        \item There exists a primitive $a \in \V(I,\Z_p)$.
        \item For each $n \in \N$, 
            there exists a primitive $a \in \V(\ep_n(I),A_n)$.
    \end{enumerate}
\end{prop}
\begin{proof}
    2. implies 1. is straightforward. 
    If 1. is true then there exists a non-zero 
    $a = (a_1,\dots,a_m) \in (\Q_p)^m$
    such that for any $f \in I$, $f(a)=0$.
    Define $b = p^{-h} a$ where $h = \min_{1 \le i \le m} (v_p(a_i))$.
    This is well-defined as all $a_i$ are non-zero.
    $b$ is in $(\Z_p)^m$: for any $i \in \set{1, \dots ,m}$,
    $a_i = p^{v_p(a_i)} u_i$ for a unit $u_i \in \Z_p$ and so
    $b_i = p^(v_p - h) u_i$ with $0 \le v_p - h = v_p(b_i)$
    since $h$ was the minimum.
    $b$ is primitive: 
    there exists an $i$ that minimises $v_p(a_i)$.
    Then $b_i = p^{-h} a_i = p^{v_p(a_i) - h} u_i = u_i$ 
    is a unit in $\Z_p$.
    $b$ is in the vanishing $\V(I,\Z_p)$ because $f$ is homogeneous.
    (Write out $f$ as a sum and use the fact that the powers add to 
    the degree of $f$.)

    We show 2. if and only if 3. by considering the subsets
    $P(I, \Z_p)$ and $P(\ep_n(I),A_n)$, 
    the primitive elements of the vanishings.
    The $P(\ep_n(I),A_n)$ form a projective system with limit
    $\varprojlim P(\ep_n(I),A_n) \iso P(I, \Z_p)$ via the same
    isomorphism. 
    Then \linkto{non_empty_projective_limits}{
        $P(I, \Z_p)$ is non-empty if and only if for all $n \in \N$,
        $P(\ep_n(I),A_n)$ is non-empty.}
\end{proof}

\begin{prop}[Taylor's theorem]
    \link{taylor}
    If $R$ be a ring,
    $f\in R[x]$
    and $a \in \Z_p$,
    there exists a $g \in R[x]$
    such that 
    \[f(x) - f(a) = f'(a)(x - a) + g(x) (x - a)^2\]
\end{prop}
\begin{proof}
    Rephrase the statement as 
    \[f(x) - f(a) = f'(a)(x - a) \quad \mod (x - a)^2\]
    We show that for any $n$, $f = x^n$ satisfies the above.
    If $n = 0$ then we can pick $g(x) = 0$ and we are done.
    For the induction step we assume there exists 
    $g \in R[x]$ such that 
    \[x^n - a^n = n a^{n-1} (x-a) + g(x)(x - a)^2\]
    Suffices to show that 
    \[ \frac{x^{n+1} - a^{n+1}}{x-a}= (n+1) a^n \quad \mod (x - a)\]
    Then \begin{align*}
        \frac{x^{n+1} - a^{n+1}}{x-a}&= x^n + \dots + a^n\\
        &= \sum_{k=0}^n x^k a^{n-k} \quad \mod (x - a)^2\\
        &= \sum_{k=0}^n a^n \quad \mod (x - a)^2\\
        &= (n+1) a^n \quad \mod (x - a)^2
    \end{align*}
    Hence it is true for all monomials.
    Now let $f = \sum_n \la_n x^n$ be any polynomial.
    Then 
    \begin{align*}
        f(x) - f(a) = \sum_n \la_n (x^n - a^n)\quad \mod (x - a)^2\\
        &= \sum_n \la_n n a^{n-1} (x-a)\quad \mod (x - a)^2\\
        &= (x-a) \sum_n \la_n n a^{n-1}\quad \mod (x - a)^2\\
        &= (x-a)f'(a)\quad \mod (x - a)^2
    \end{align*}
\end{proof}

\begin{prop}[Newton's Method]
    \link{newton}
    Let $f \in \Z_p[x]$, $a \in \Z_p$
    conceptually:
    Suppose for $f'(a) \le 1$.
    Then there exists $y \in \Z_p$ such that
    \begin{enumerate}
        \item $\abs{f'(a)(y - a)} \le \abs{f(a)}$
        \item $\abs{f(y)} \le \frac{\abs{f(a)}}{p}$
        \item $\abs{f'(y)} = \abs{f'(a)}$
    \end{enumerate}
    Hence we have $y$ such that it is close to $a$,
    $f(y)$ is `much' closer to $0$, 
    and the derivative is the same size.

    Elementarily:
    Suppose $b,c \in \Z_p, n, k \in \Z$.
    Suppose $0 \le 2k < n$, $f(a) = p^n b$, $f'(a) = p^{k} c$ 
    and $c$ is a unit.
    Then there exists $y \in \Z_p$ such that 
    \[
        y - a \in p^{n-k} \Z_p \quad
        f(y) \in p^{n+1} \Z_p, \quad v_p(f'(y)) = k, 
    \]
\end{prop}
\begin{proof}
    Take $y = a - p^{n-k} c^{-1} b$.
    Clealy $y - a \in p^{n-k} \Z_p $.
    By \linkto{taylor}{Taylor's formula}
    \begin{align*}
        f(y) - f(a) &=  
        - f'(a) p^{n-k} c^{-1} b + g(y) c^{-2} b^2 (p^{n-k})^2\\
        \implies f(y) - p^n b &= - p^{k} b p^{n-k} z + 
        g(y) c^{-2} b^2 p^{2n - 2k}\\
        \implies f(y) &= c^{-2} b^2 g(y) p^{2n - 2k}
    \end{align*}
    Hence $f(y) \in p^{2n + 1} \Z_p$ if and only if
    $2n + 1 \le 2n - 2k$ if and only if $2k + 1 \le n$,
    which is true.

    To check that  $v_p(f'(y)) = k$ we use Taylor's formula again:
    \[f'(y) - f'(a) = f''(a)(y - a) + g(y) (y - a)^2\]
    Hence 
    \begin{align*}
        f'(y) &= 
        f'(a) - f''(a) p^{n-k} c^{-1} b + g(x)p^{2n-2k}c^{-2}b^2\\
        &= p^k c - (f''(a) c^{-1} b + g(x)p^{n-k}c^{-2}b^2)p^{n-k}\\
        &= p^k (c - \star p^{n-2k})
    \end{align*}
    where $\star \in \Z_p$.
    Hence $c - \star p^{n-2k}$ is a unit since $p$ does not divide it.
    Thus $v_p(f'(y)) = k$. 
\end{proof}

\begin{prop}[Polynomials are continuous]
    \link{polynomials_continuous}
    The maps $\star + \star : (\Q_p)^2 \to \Q_p$ and 
    $\star \cdot \star : (\Q_p)^2 \to \Q_p$ are continuous.
    Hence by induction polynomials are continuous maps.
\end{prop}
\begin{proof}
    Standard.
    For product use the trick
    \[ab - cd = a(b - d) + b(a - c) +(a - c)(d - b)\]
\end{proof}

\begin{prop}[General Hensel]
    \link{gen_hensel}
    If $f \in \Z_p[x_1,\dots, x_m]$ and there exist 
    $a \in (\Z_p)^m$,
    $n, k \in \Z$ such that $0 \le 2k < n$ and 
    $f(a) \in p^n \Z_p$
    and there exists $j \in \set{1, \dots, m}$ such that 
    $v_p (\dbd{f}{x_j}(a)) = k$,
    then there exists $y \in (\Z_p)^m$ such that
    \[a - y \in p^{n-k} \Z_p \quad \text{ and } \quad f(y) = 0\]
\end{prop}
\begin{proof}
    Case $m = 1$ and let $f \in \Z_p[x_1]$, 
    $a \in \Z_p, n, k \in \Z$ such that $f(a) \in p^n \Z_p$
    such that 
    $v_p (\dbd{f}{x_1}(a)) = v_p(f'(a))= k$.
    Let $y_n = a$.
    By induction with \linkto{newton}{Newton's Method} 
    at each step, 
    we obtain for each $l \in \N_{> n}$ a 
    $y_l \in \Z_p$ such that $f(y_l) \in p^{m} \Z$,
    $v_p(f'(y_m)) = k$ and 
    $y_{l} - y_{l-1} \in p^{l-1-k} \Z_p$.
    The $(y_m)_{m \in \N}$ is a sequence in $\Z_p$
    which is Cauchy since each $y_{l} - y_{l-1} \in p^{l-1-k} \Z_p$
    so $\abs{y_{l} - y_{l-1}} \le p^{k + 1 - l} \to 0$ 
    as $l \to \infty$.
    Since $\Z_p$ is complete this converges to $y \in \Z_p$.
    It is clear that $\abs{y - y{l}} \le p^{k-l}$
    for each $l$. 
    In particular $\abs{y - a} \le p^{k-n}$
    hence $a - y \in p^{n-k}$.
    Furthermore since 
    \linkto{polynomials_continuous}{$f$ is continuous}
    and $f(y_n)$ are in shrinking balls around $0$,
    \[f(y) = f(\lim_{n \to \infty} y_n) = 
    \lim_{n \to \infty} f(y_n) = 0\]
    
    For the case $1 < m$ 
    we reduce it to the same situation as above.
    Suppose $f \in \Z_p[x_1,\dots, x_m]$,
    $a \in (\Z_p)^m$,
    $n, k \in \Z$ such that $f(a) \in p^n \Z_p$
    and there exists $j \in \set{1, \dots, m}$ such that 
    $v_p (\dbd{f}{x_j}(a)) = k$.
    Then take 
    $f(a_1,\dots, a_{j-1}, x_j, a_{j+1},\dots, a_m) \in \Z_p[x_j]$,
    $f$ with its variables substituted for $a_i$ except for when $i = j$.
    This satisfies the conditions of the first part
    so we are done.
\end{proof}

\begin{cor}[Hensel]
    \link{hensel}
    Let $f \in \Z_p [x_1,\dots,x_m]$, 
    suppose there exists $c \in (p \Z_p)^m$
    such that $\ep_1(f(c)) = 0$ and 
    there exists a $j \in \set{1,\dots m}$
    such that $\dbd{f}{x_j}(c) \ne 0$
    then there exists a $c^* \in (\Z_p)^m$ 
    such that $f(c^*) = 0$ and 
    $\ep_1(c^* - c) = 0$.
\end{cor}
\begin{proof}
    Apply \linkto{gen_hensel}{general Hensel with}
    $n = 1$ and $k = 0$.
\end{proof}

\begin{cor}[Quadratic forms for $p \ne 2$]
    Suppose $p \ne 2$, 
    $A \in (p\Z_p)^{n \times n}$
    such that for all 
    $i,j \in \set{1,\dots,m}, A_{ij} = A_{ji}$
    and $\det A$ a unit. 
    Let
    \[
        f = x^T A x = 
        \sum_{i = 1}^m \sum_{j = 1}^m A_{ij} x_i x_j
        \in \Z_p[x_1,\dots,x_m]
    \]
    If for any $a \in \Z_p$,
    there exists primitive $c \in (\Z_p)^m$
    such that $ep_1(f(c) - a) = 0$
    then there exists $c^* \in (\Z_p)^m$
    such that $f(c^*) = 0$ and $\ep_1(c^* - c) = 0$.   
\end{cor}
\begin{proof}
    By \linkto{hensel}{Hensel} applied to $g(x) := f(x) - a$
    it suffices to show that
    there exists a $j \in \set{1,\dots, m}$ such that 
    $\dbd{f}{x_j}(c) \ne 0$.
    Suppose not.
    Then for any $j \in \set{1,\dots, m}$
    \[0 = \dbd{f}{x_j}(c) = 2 \sum_{i \in S} A_ij c_i\]
    Since $p \ne 2$ we have that for all $j$
    \[0 = \sum_{i \in S} \ep_1(A_ij) \ep_1(c_i) = 
    \ep_1 (A_j) \ep_1(c)\]
    Hence \[0 = \ep_1 (A) \ep_1 (c)\]
    Since the determinant of $A$ is a unit,
    the determinant of $\ep_1 (A)$ is a unit
    (determinant commutes with ring morphisms).
    Thus multiplying by the adjugate of $\ep_1 (A)$ 
    we obtain $0 = \ep_1(c)$.
    This is a contradiction as $c$ is primitive.
\end{proof}

\begin{cor}[Quadratic forms for $\Z_2$]
    Suppose $A \in (2 \Z_2)^{n \times n}$
    such that for all 
    $i,j \in \set{1,\dots,m}, A_{ij} = A_{ji}$. 
    Let
    \[
        f = x^T A x = 
        \sum_{i = 1}^m \sum_{j = 1}^m A_{ij} x_i x_j
        \in \Z_2[x_1,\dots,x_m]
    \]
    If for any $a \in \Z_2$,
    there exists primitive $c \in (\Z_2)^m$
    such that $ep_3(f(c) - a) = 0$ and
    \[\det(A) \text{ is a unit of } \Z_2 \quad \OR \quad 
    \exists j \in \set{1,\dots,m}, \ep_2(\dbd{f}{x_j}(c)) \ne 0\]
    then there exists $c^* \in (\Z_p)^m$
    such that $f(c^*) = 0$ and $\ep_1(c^* - c) = 0$.   
\end{cor}
\begin{proof}
    We show that 
    \[\det A \text{ is a unit of } \Z_2 \quad \implies \quad 
    \exists j \in \set{1,\dots,m}, \ep_2(\dbd{f}{x_j}(c)) \ne 0\]
    Suppose not.
    \begin{align*}
        &\quad \forall j \in \set{1,\dots,m}, \ep_2(\dbd{f}{x_j}(c)) = 0\\
        &\implies \forall j, \ep_2(2 \sum A_{ij} c_i) = 0\\
        &\implies \forall j, 2 \ep_2(A_j)\ep_2(c) = 0\\
        &\implies 2 \ep_2(A)\ep_2(c) = 0\\
        &\implies 2 \ep_2(c) = 0 \quad \text{since } 
        \det A \text{is a unit}\\
        &\implies \ep_2(c) = 0 \OR \ep_2(c) = 2
        &\implies \ep_1(c) = 0 \quad \text{ a contradiction}
    \end{align*}
    Hence in either case $\exists j, \ep_2(\dbd{f}{x_j}(c)) \ne 0$
    We can then apply \linkto{gen_hensel}{general Hensel} 
    with $n = 3, k < 2, g(x) = f(x) - a$ and obtain $c^*$.
\end{proof}


